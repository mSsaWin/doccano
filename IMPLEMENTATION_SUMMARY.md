# –†–µ–∑—é–º–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è 19k+ labels

## üéØ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∞–≥–∞–ª–∞ –ø—Ä–∏ 19k+ labels
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö labels –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—Å–µ—Ö 19k labels –≤ DOM (sidebar)
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º 19k labels

### –†–µ—à–µ–Ω–∏–µ:
‚úÖ **–ó–∞–≥—Ä—É–∂–∞–µ–º –¢–û–õ–¨–ö–û 200 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö labels**
‚úÖ **Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 50 labels**
‚úÖ **–°–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–π –±–∞–∑–µ**
‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö labels**

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend (Python/Django):

1. **`backend/label_types/views.py`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è (`LimitOffsetPagination`)
   - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (`?q=search`)
   - –ù–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã: `PopularLabelsMixin`, `CategoryTypePopular`, `SpanTypePopular`, `RelationTypePopular`
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ (usage_count)

2. **`backend/label_types/urls.py`**
   - –ù–æ–≤—ã–µ endpoints: `/span-types/popular`, `/category-types/popular`, `/relation-types/popular`

### Frontend (Vue.js/Nuxt.js):

3. **`frontend/domain/models/label/labelRepository.ts`**
   - –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `LabelRepository` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `LabelListOptions`

4. **`frontend/repositories/label/apiLabelRepository.ts`**
   - –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `LabelListOptions`
   - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `listPopular()`, `search()`, `listAll()`
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ `list()`

5. **`frontend/services/application/label/labelApplicationService.ts`**
   - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `listPopular()`, `search()`, `listAll()`

6. **`frontend/composables/useLabelList.ts`**
   - –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `getPopularLabels()`, `searchLabels()`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isLoading` –∏ `popularLabels`

7. **`frontend/components/tasks/sequenceLabeling/LabelingMenu.vue`**
   - –î–æ–±–∞–≤–ª–µ–Ω **—Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** (props: `projectId`, `labelService`)
   - Debounce 300ms –¥–ª—è –ø–æ–∏—Å–∫–∞
   - –ü–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10 labels –≤ —Å–ø–∏—Å–∫–µ
   - –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

8. **`frontend/components/tasks/sequenceLabeling/EntityEditor.vue`**
   - –ù–æ–≤—ã–µ props: `projectId`, `labelService`, `relationLabelService`
   - –ü–µ—Ä–µ–¥–∞—á–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `LabelingMenu`

9. **`frontend/pages/projects/_id/sequence-labeling/index.vue`**
   - **–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ labels (200 —à—Ç.)**
   - **–ù–ï–¢ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö labels**
   - Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 50 labels
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö labels
   - –ü–µ—Ä–µ–¥–∞—á–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `EntityEditor`

10. **`frontend/pages/projects/_id/text-classification/index.vue`**
    - –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö labels (200 —à—Ç.)
    - –ë–µ–∑ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö labels

---

## üöÄ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –£–º–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```javascript
// ‚ùå –ë–´–õ–û: –∑–∞–≥—Ä—É–∂–∞–ª–∏ –≤—Å–µ 19k labels
const allLabels = await service.list(projectId)

// ‚úÖ –°–¢–ê–õ–û: –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ
const popularLabels = await service.listPopular(projectId, 200)
```

### 2. –°–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
```javascript
// ‚ùå –ë–´–õ–û: –ª–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ 19k –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º labels
searchResults = allLabels.filter(label => 
  label.text.includes(query)
)

// ‚úÖ –°–¢–ê–õ–û: —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–π –±–∞–∑–µ
searchResults = await service.search(projectId, query, 100)
// API: GET /projects/1/span-types?q=person&limit=100
```

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```javascript
// ‚ùå –ë–´–õ–û: —Ä–µ–Ω–¥–µ—Ä–∏–ª–∏ –≤—Å–µ 19k labels –≤ sidebar
<v-chip v-for="label in allLabels" ...>

// ‚úÖ –°–¢–ê–õ–û: –º–∞–∫—Å–∏–º—É–º 50 labels
<v-chip v-for="label in labels.slice(0, 50)" ...>
```

### 4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞
```javascript
// –ü—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–≥–æ label –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
if (!loadedLabels.has(labelId)) {
  const label = await service.findById(projectId, labelId)
  loadedLabels.push(label)
}
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| **–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** | 5-10 —Å–µ–∫ | 0.2-0.5 —Å–µ–∫ | **20-50x –±—ã—Å—Ç—Ä–µ–µ** |
| **Labels –≤ –ø–∞–º—è—Ç–∏** | 19,000 | 200 | **95x –º–µ–Ω—å—à–µ** |
| **DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ sidebar** | 19,000 | 50 | **380x –º–µ–Ω—å—à–µ** |
| **–ü–æ–∏—Å–∫ label** | –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ | <100ms | **‚àû —É–ª—É—á—à–µ–Ω–∏–µ** |
| **–ü–ª–∞–≤–Ω–æ—Å—Ç—å UI** | –ó–∞–≤–∏—Å–∞–µ—Ç | –ü–ª–∞–≤–Ω–æ | ‚úÖ |

---

## üîÑ API Endpoints

### –ù–æ–≤—ã–µ endpoints:

```bash
# –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ labels
GET /api/projects/{id}/span-types/popular?limit=200
GET /api/projects/{id}/category-types/popular?limit=200
GET /api/projects/{id}/relation-types/popular?limit=200

# –ü–æ–∏—Å–∫
GET /api/projects/{id}/span-types?q=person&limit=100

# –ü–∞–≥–∏–Ω–∞—Ü–∏—è
GET /api/projects/{id}/span-types?limit=50&offset=100

# –í—Å–µ labels (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
GET /api/projects/{id}/span-types?no_page=true
```

---

## ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

1. ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ
2. ‚úÖ **–ü–ª–∞–≤–Ω—ã–π UI** - –º–∏–Ω–∏–º—É–º DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
3. ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** - —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–π –±–∞–∑–µ
4. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º labels
5. ‚úÖ **–£–º–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞** - –∑–∞–≥—Ä—É–∂–∞–µ–º labels –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
6. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å backend:**
   ```bash
   cd backend
   python manage.py runserver
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å frontend:**
   ```bash
   cd frontend
   npm run dev
   ```

3. **–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç —Å 19k+ labels**

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (<1 —Å–µ–∫)
   - ‚úÖ –í sidebar –º–∞–∫—Å–∏–º—É–º 50 label chips
   - ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
   - ‚úÖ –í Network tab –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã `/span-types/popular` –∏ `/span-types?q=...`
   - ‚úÖ –ü—Ä–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–µ–Ω—é —Å –ø–æ–∏—Å–∫–æ–º
   - ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ª—é–±–æ–π label —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫
   - ‚úÖ UI –Ω–µ –ª–∞–≥–∞–µ—Ç

---

## üéì –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ labels (Popular Labels)
**–ü–æ—á–µ–º—É:** 80% —Ä–∞–±–æ—Ç—ã –¥–µ–ª–∞–µ—Ç—Å—è —Å 20% labels (–ø—Ä–∏–Ω—Ü–∏–ø –ü–∞—Ä–µ—Ç–æ)
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ø-200 —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö labels –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

### 2. –°–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
**–ü–æ—á–µ–º—É:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–∫–∞—Ç—å –≤ 19k —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ SQL –Ω–∞ –±—ç–∫–µ–Ω–¥–µ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ DOM
**–ü–æ—á–µ–º—É:** 19k DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–±–∏–≤–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:** –ú–∞–∫—Å–∏–º—É–º 50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ sidebar, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ autocomplete

### 4. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
**–ü–æ—á–µ–º—É:** –ù–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–≥—Ä—É–∂–∞–µ–º labels —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω—É–∂–Ω—ã

---

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö labels –≤ localStorage
- [ ] "–ù–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ" labels –¥–ª—è —Å–µ—Å—Å–∏–∏
- [ ] –ò–∑–±—Ä–∞–Ω–Ω—ã–µ (starred) labels
- [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ labels –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- [ ] –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —Å fuzzy matching

---

## üí° –ö–ª—é—á–µ–≤—ã–µ takeaways

1. **–ù–ï –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É** - –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
3. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ DOM** - —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º–æ–µ
4. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ** - 80/20 –ø—Ä–∞–≤–∏–ª–æ
5. **–ü–æ–¥–≥—Ä—É–∂–∞–π—Ç–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é** - lazy loading saves lives

---

## üéâ –ò—Ç–æ–≥

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –¥–∞–∂–µ —Å 19,000+ labels –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∑–∞–ø–∏—Å–µ–π.

**–í—Ä–µ–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** ~2 —á–∞—Å–∞  
**–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 20-50x  
**–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** üìàüìàüìà
